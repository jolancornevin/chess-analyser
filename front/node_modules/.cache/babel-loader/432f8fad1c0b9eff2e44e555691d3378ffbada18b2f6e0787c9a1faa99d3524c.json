{"ast":null,"code":"var _jsxFileName = \"/Users/jcornevin/Dev/Perso/chess-analyser/src/components/right-menu/moves.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { Mutex } from \"async-mutex\";\nimport { useCallback, useMemo, useState } from \"react\";\nimport { ComputeMoveScore } from \"../types\";\nimport { Fragment as _Fragment, jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst mutex = new Mutex();\nfunction MoveUX({\n  i,\n  move,\n  onMoveClick,\n  currentMove,\n  setCurrentMove\n}) {\n  _s();\n  const [score, setScore] = useState(null);\n  useMemo(async () => {\n    const release = await mutex.acquire();\n    await ComputeMoveScore(move).then(_move => {\n      setScore({\n        scoreDiff: _move.scoreDiff,\n        accuracy: _move.accuracy\n      });\n      release();\n    });\n  }, []);\n  const noteMove = useCallback(score => {\n    if (!score) {\n      return 'loading';\n    }\n    if (score.scoreDiff < 20) {\n      return '';\n    }\n    if (score.scoreDiff < 40) {\n      return '!';\n    }\n    if (score.scoreDiff < 60) {\n      return '!!';\n    }\n    if (score.scoreDiff < 80) {\n      return '!!';\n    }\n    if (score.scoreDiff < 100) {\n      return '!!!!!!';\n    }\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: `${score.scoreDiff}`\n    }, void 0, false);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: \"50%\",\n      cursor: \"pointer\",\n      textAlign: \"left\",\n      backgroundColor: i === currentMove ? \"#8b8987\" : \"\"\n    },\n    onClick: async () => {\n      setCurrentMove(i);\n      await onMoveClick(move);\n    },\n    children: [move.number, \". \", move.to, \" \", noteMove(score)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 9\n  }, this);\n}\n_s(MoveUX, \"nBMHNPbqz2ERufxegakMOoCNdcQ=\");\n_c = MoveUX;\nexport function Moves({\n  moves,\n  onMoveClick\n}) {\n  _s2();\n  const [currentMove, setCurrentMove] = useState(0);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      overflowY: \"auto\",\n      height: 600,\n      marginTop: 8,\n      border: \"1px solid white\"\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        flex: 1,\n        display: \"flex\",\n        flexDirection: \"row\",\n        flexWrap: \"wrap\",\n        width: \"100%\"\n      },\n      children: moves.map((move, i) => {\n        // TODO hightlight current move + hotkey left and right to move from move to move\n        return /*#__PURE__*/_jsxDEV(MoveUX, {\n          i: i,\n          move: move,\n          onMoveClick: onMoveClick,\n          currentMove: currentMove,\n          setCurrentMove: setCurrentMove\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 25\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 78,\n    columnNumber: 9\n  }, this);\n}\n_s2(Moves, \"oIy4klWwBtFCTtPkT61SX6cg2U4=\");\n_c2 = Moves;\nvar _c, _c2;\n$RefreshReg$(_c, \"MoveUX\");\n$RefreshReg$(_c2, \"Moves\");","map":{"version":3,"names":["Mutex","useCallback","useMemo","useState","ComputeMoveScore","Fragment","_Fragment","jsxDEV","_jsxDEV","mutex","MoveUX","i","move","onMoveClick","currentMove","setCurrentMove","_s","score","setScore","release","acquire","then","_move","scoreDiff","accuracy","noteMove","children","style","width","cursor","textAlign","backgroundColor","onClick","number","to","fileName","_jsxFileName","lineNumber","columnNumber","_c","Moves","moves","_s2","overflowY","height","marginTop","border","flex","display","flexDirection","flexWrap","map","_c2","$RefreshReg$"],"sources":["/Users/jcornevin/Dev/Perso/chess-analyser/src/components/right-menu/moves.tsx"],"sourcesContent":["import { Mutex } from \"async-mutex\";\nimport { useCallback, useMemo, useState } from \"react\";\nimport { ComputeMoveScore, Move } from \"../types\";\n\ninterface MoveProps {\n    i: number;\n\n    move: Move;\n    onMoveClick: (move: Move) => Promise<void>\n\n    currentMove: number;\n    setCurrentMove: React.Dispatch<React.SetStateAction<number>>\n}\n\nconst mutex = new Mutex();\n\nfunction MoveUX({ i, move, onMoveClick, currentMove, setCurrentMove }: MoveProps): JSX.Element {    \n    const [score, setScore] = useState(null);\n    \n    useMemo(async () => {\n        const release = await mutex.acquire();\n        await ComputeMoveScore(move).then((_move) => {\n            setScore({scoreDiff: _move.scoreDiff, accuracy: _move.accuracy});\n\n            release();\n        })\n    }, []);\n    \n    const noteMove = useCallback((score) => {\n        if (!score) {\n            return 'loading';\n        }\n\n        if (score.scoreDiff < 20) {\n            return ''\n        }\n\n        if (score.scoreDiff < 40) {\n            return '!'\n        }\n\n        if (score.scoreDiff < 60) {\n            return '!!'\n        }\n\n        if (score.scoreDiff < 80) {\n            return '!!'\n        }\n\n        if (score.scoreDiff < 100) {\n            return '!!!!!!'\n        }\n\n        return <>\n            {`${score.scoreDiff}`}</>\n    }, [])\n\n    return (\n        <div style={{ width: \"50%\", cursor: \"pointer\", textAlign: \"left\", backgroundColor: i === currentMove? \"#8b8987\": \"\" }} onClick={async () => {\n            setCurrentMove(i);\n            await onMoveClick(move)\n        }}>\n            {move.number}. {move.to} {noteMove(score)}\n        </div>\n    );\n}\n\n\ninterface MovesProps {\n    moves: Move[];\n    onMoveClick: (move: Move) => Promise<void>\n}\n\nexport function Moves({ moves, onMoveClick }: MovesProps): JSX.Element {\n    const [currentMove, setCurrentMove] = useState(0);\n    \n    return (\n        <div style={{ overflowY: \"auto\", height: 600, marginTop: 8, border: \"1px solid white\",  }}>\n            <div style={{\n                flex: 1,\n                display: \"flex\",\n                flexDirection: \"row\",\n                flexWrap: \"wrap\",\n                width: \"100%\"\n            }}>\n                {moves.map((move, i): JSX.Element => {\n                    // TODO hightlight current move + hotkey left and right to move from move to move\n                    return (\n                        <MoveUX key={i} i={i} move={move} onMoveClick={onMoveClick} currentMove={currentMove} setCurrentMove={setCurrentMove}/>\n                    );\n                })}\n            </div>\n        </div>\n    )\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}