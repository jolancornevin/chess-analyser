{"ast":null,"code":"import * as board from './board.js';\nimport * as util from './util.js';\nimport { cancel as dragCancel } from './drag.js';\nexport function setDropMode(s, piece) {\n  s.dropmode = {\n    active: true,\n    piece\n  };\n  dragCancel(s);\n}\nexport function cancelDropMode(s) {\n  s.dropmode = {\n    active: false\n  };\n}\nexport function drop(s, e) {\n  if (!s.dropmode.active) return;\n  board.unsetPremove(s);\n  board.unsetPredrop(s);\n  const piece = s.dropmode.piece;\n  if (piece) {\n    s.pieces.set('a0', piece);\n    const position = util.eventPosition(e);\n    const dest = position && board.getKeyAtDomPos(position, board.whitePov(s), s.dom.bounds());\n    if (dest) board.dropNewPiece(s, 'a0', dest);\n  }\n  s.dom.redraw();\n}","map":{"version":3,"names":["board","util","cancel","dragCancel","setDropMode","s","piece","dropmode","active","cancelDropMode","drop","e","unsetPremove","unsetPredrop","pieces","set","position","eventPosition","dest","getKeyAtDomPos","whitePov","dom","bounds","dropNewPiece","redraw"],"sources":["/Users/jcornevin/Dev/Perso/chess-analyser/node_modules/chessground/src/drop.ts"],"sourcesContent":["import { State } from './state.js';\nimport * as cg from './types.js';\nimport * as board from './board.js';\nimport * as util from './util.js';\nimport { cancel as dragCancel } from './drag.js';\n\nexport function setDropMode(s: State, piece?: cg.Piece): void {\n  s.dropmode = {\n    active: true,\n    piece,\n  };\n  dragCancel(s);\n}\n\nexport function cancelDropMode(s: State): void {\n  s.dropmode = {\n    active: false,\n  };\n}\n\nexport function drop(s: State, e: cg.MouchEvent): void {\n  if (!s.dropmode.active) return;\n\n  board.unsetPremove(s);\n  board.unsetPredrop(s);\n\n  const piece = s.dropmode.piece;\n\n  if (piece) {\n    s.pieces.set('a0', piece);\n    const position = util.eventPosition(e);\n    const dest = position && board.getKeyAtDomPos(position, board.whitePov(s), s.dom.bounds());\n    if (dest) board.dropNewPiece(s, 'a0', dest);\n  }\n  s.dom.redraw();\n}\n"],"mappings":"AAEA,OAAO,KAAKA,KAAK,MAAM,YAAY;AACnC,OAAO,KAAKC,IAAI,MAAM,WAAW;AACjC,SAASC,MAAM,IAAIC,UAAU,QAAQ,WAAW;AAEhD,OAAM,SAAUC,WAAWA,CAACC,CAAQ,EAAEC,KAAgB;EACpDD,CAAC,CAACE,QAAQ,GAAG;IACXC,MAAM,EAAE,IAAI;IACZF;GACD;EACDH,UAAU,CAACE,CAAC,CAAC;AACf;AAEA,OAAM,SAAUI,cAAcA,CAACJ,CAAQ;EACrCA,CAAC,CAACE,QAAQ,GAAG;IACXC,MAAM,EAAE;GACT;AACH;AAEA,OAAM,SAAUE,IAAIA,CAACL,CAAQ,EAAEM,CAAgB;EAC7C,IAAI,CAACN,CAAC,CAACE,QAAQ,CAACC,MAAM,EAAE;EAExBR,KAAK,CAACY,YAAY,CAACP,CAAC,CAAC;EACrBL,KAAK,CAACa,YAAY,CAACR,CAAC,CAAC;EAErB,MAAMC,KAAK,GAAGD,CAAC,CAACE,QAAQ,CAACD,KAAK;EAE9B,IAAIA,KAAK,EAAE;IACTD,CAAC,CAACS,MAAM,CAACC,GAAG,CAAC,IAAI,EAAET,KAAK,CAAC;IACzB,MAAMU,QAAQ,GAAGf,IAAI,CAACgB,aAAa,CAACN,CAAC,CAAC;IACtC,MAAMO,IAAI,GAAGF,QAAQ,IAAIhB,KAAK,CAACmB,cAAc,CAACH,QAAQ,EAAEhB,KAAK,CAACoB,QAAQ,CAACf,CAAC,CAAC,EAAEA,CAAC,CAACgB,GAAG,CAACC,MAAM,EAAE,CAAC;IAC1F,IAAIJ,IAAI,EAAElB,KAAK,CAACuB,YAAY,CAAClB,CAAC,EAAE,IAAI,EAAEa,IAAI,CAAC;;EAE7Cb,CAAC,CAACgB,GAAG,CAACG,MAAM,EAAE;AAChB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}